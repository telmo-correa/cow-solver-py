#!/bin/bash

# Pre-push hook to prevent Claude from pushing without user authorization
#
# Claude runs git commands but doesn't know to set the bypass variable.
# This ensures a human explicitly authorizes each push.
#
# To push as a human:
#   I_AM_HUMAN=1 git push
#
# Or set it for your session:
#   export I_AM_HUMAN=1

if [ "$I_AM_HUMAN" != "1" ]; then
    echo ""
    echo "═══════════════════════════════════════════════════════════════════"
    echo "  PUSH BLOCKED"
    echo "═══════════════════════════════════════════════════════════════════"
    echo ""
    echo "  Claude, you should NOT be pushing without explicit user approval."
    echo ""
    echo "  Remember:"
    echo "    1. Make changes"
    echo "    2. Show the diff for review"
    echo "    3. Wait for explicit 'commit' instruction"
    echo "    4. Wait for explicit 'push' instruction"
    echo ""
    echo "  If you are the human user, run:"
    echo "    I_AM_HUMAN=1 git push"
    echo ""
    echo "═══════════════════════════════════════════════════════════════════"
    echo ""
    exit 1
fi
